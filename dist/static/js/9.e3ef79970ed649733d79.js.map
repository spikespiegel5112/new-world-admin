{"version":3,"sources":["webpack:///./src/views/game/gameSort.vue?56e0","webpack:///src/views/game/gameSort.vue","webpack:///./src/views/game/gameSort.vue?6678","webpack:///./src/views/game/gameSort.vue","webpack:///./src/views/game/gameSort.vue?0f0e"],"names":["module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","gameSort","CommonTag","CommonQuery","Draggable","vuedraggable_default","a","currentDeviceType","currentGameTypeId","value","getGameTypeInfo","_this","this","pagination","queryModel","then","response","topNumber","id","getSortList","_this2","item1","result","deviceType","item","data","currentTopNumber","code","currentSortData","chosenGameInfo","initSortData","_this3","error","_this4","gameOptions","total","name","_this5","game_gameSort","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","loading","relative","_v","tab-position","on","tab-click","chooseDeviceType","_l","$store","state","app","key","style","height","layoutHeight","label","chooseGameType","gameTypeInfo","index","type","justify","staticStyle","text-align","span","options","start","$event","drag","end","model","callback","$$v","expression","_s","click","minusGame","length","handleAddGame","_e","disabled","compareIsSortDataChanged","saveSort","title","textMap","dialogStatus","visible","dialogFormVisible","width","update:visible","ref","rules","label-position","label-width","prop","fetch-suggestions","focusSortList","placeholder","select","chooseGame","chosenGameName","slot","directives","rawName","$t","addGame","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","content","locals"],"mappings":"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","file":"static/js/9.e3ef79970ed649733d79.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.game_sortlist_container .gamename {\\n  display: inline-block;\\n  width: 80%;\\n  height: 60px;\\n  line-height: 60px;\\n  vertical-align: middle;\\n  font-size: 20px;\\n}\\n.game_sortlist_container .sortlist .minus {\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"D:/website/new-world-admin/src/views/game/gameSort.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,sBAAsB;EACtB,WAAW;EACX,aAAa;EACb,kBAAkB;EAClB,uBAAuB;EACvB,gBAAgB;CACjB;AACD;EACE,mBAAmB;EACnB,SAAS;EACT,OAAO;CACR\",\"file\":\"gameSort.vue\",\"sourcesContent\":[\"\\n.game_sortlist_container .gamename {\\n  display: inline-block;\\n  width: 80%;\\n  height: 60px;\\n  line-height: 60px;\\n  vertical-align: middle;\\n  font-size: 20px;\\n}\\n.game_sortlist_container .sortlist .minus {\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-494531fc\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=styles&index=0!./src/views/game/gameSort.vue\n// module id = /EmV\n// module chunks = 9","<template>\n  <div class=\"app-container\">\n    <CommonLoading :loading=\"loading\" :relative=\"false\"/>\n\n    <el-tabs tab-position=\"left\" @tab-click=\"chooseDeviceType\">\n\n      <el-tab-pane v-for=\"item in $store.state.app.deviceTypeDictionary\" :key=\"item.code\" :label=\"item.name\"\n                   :style=\"{height:layoutHeight-5+'px'}\">\n        <el-tabs tab-position=\"left\" @tab-click=\"chooseGameType\">\n          <el-tab-pane v-for=\"(item, index) in gameTypeInfo.list\" :key=\"item.id\"\n                       :label=\"item.name+`(槽位容量${item.topNumber})`\">\n            <el-row type=\"flex\" justify='center'>\n              <el-col :span=\"24\" style=\"text-align: center\">\n                <div class=\"common_sortlist_wrapper game_sortlist_container\">\n                  <ul class=\"sortlist\">\n                    <Draggable v-model=\"currentSortData\" :options=\"{}\" @start=\"drag=true\" @end=\"drag=false\">\n                      <li v-for=\"(item, index) in currentSortData\" :key=\"item.id\">\n                        <label class=\"gamename\">{{item.name}}</label>\n                        <a @click=\"minusGame(index)\" class=\"minus\">\n                          <span class=\"add el-icon-remove-outline\"></span>\n                        </a>\n                      </li>\n                    </Draggable>\n                  </ul>\n                  <ul class=\"add\" v-if=\"currentSortData.length<currentTopNumber\">\n                    <li>\n                      <a class=\"plus\" @click=\"handleAddGame\">\n                        <span class=\"add el-icon-circle-plus-outline\"></span>\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n              </el-col>\n            </el-row>\n            <el-row class=\"footer\" type=\"flex\" justify=\"center\">\n              <el-col :span=\"6\" style=\"text-align: center\">\n                <el-button type=\"primary\" @click=\"saveSort\" :disabled=\"!compareIsSortDataChanged()\">保存排序</el-button>\n              </el-col>\n            </el-row>\n          </el-tab-pane>\n        </el-tabs>\n      </el-tab-pane>\n    </el-tabs>\n\n\n    <!-- 弹框 -->\n    <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\" width=\"600px\">\n      <el-row type=\"flex\" justify=\"center\">\n        <el-col :span=\"20\">\n          <el-form :rules=\"rules\" ref=\"queryModel\" :model=\"queryModel\" label-position=\"right\" label-width=\"150px\">\n            <el-form-item label=\"游戏名称\" prop=\"name\">\n              <el-autocomplete\n                v-model=\"chosenGameName\"\n                :fetch-suggestions=\"focusSortList\"\n                placeholder=\"请输入内容\"\n                @select=\"chooseGame\"\n              ></el-autocomplete>\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\" v-waves>{{$t('table.cancel')}}</el-button>\n        <el-button type=\"primary\" @click=\"addGame\" v-waves>{{$t('table.confirm')}}</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>`\n\n<script>\n  import CommonTag from '@/views/common/CommonTag.vue'\n  import CommonQuery from '@/views/common/CommonQuery.vue'\n  import Draggable from 'vuedraggable'\n  // import Sortable from 'sortablejs'\n\n  export default {\n    components: {\n      CommonTag,\n      CommonQuery,\n      Draggable,\n      // Sortable\n    },\n    data() {\n      return {\n        game_typeAddOrUpdateRequest: 'game-service/1.0.0/game_type/addOrUpdate',\n        game_typeDeleteRequest: 'game-service/1.0.0/game_type/delete',\n\n        game_infoListRequest: 'game-service/1.0.0/game_info/list',\n        rankGameByTypeRequest: 'game-service/1.0.0/game_type_mapping/rankGameByType',\n\n        game_typeListRequest: 'game-service/1.0.0/game_type/list',\n\n        findHomePageGameInfoRequest: 'game-service/1.0.0/game_info/findHomePageGameInfo',\n\n        operationGameTypeMappingRequest: 'game-service/1.0.0/game_type_mapping/operationGameTypeMapping',\n        rankListRequest: 'game-service/1.0.0/game_info/rank/list',\n\n        queryModel: {\n          deviceType: this.currentDeviceType,\n          gameTypeId: this.currentGameTypeId,\n          // topNumber: 0,\n          // ios: false,\n          // android: true\n        },\n        pagination: {\n          page: 1,\n          limit: 20,\n        },\n        formData: {\n          id: 0,\n          name: '',\n          \"title\": \"\",\n          \"description\": '',\n          \"iconUrl\": \"\",\n          \"bigImageUrl\": \"\",\n          \"iosDownloadUrl\": \"\",\n          androidDownloadUrl: '',\n          webGameUrl: '',\n          nature: \"\",\n          ios: false,\n          android: false,\n          status: null\n        },\n        dialogFormVisible: false,\n        dialogStatus: '',\n        textMap: {\n          update: 'Edit',\n          create: 'Create'\n        },\n        dialogPvVisible: false,\n        rules: {\n          name: [{\n            required: true,\n            message: \"此项为不能为空\",\n            trigger: \"change\"\n          }],\n        },\n        loading: false,\n        fileList: [],\n        gameTypeInfo: [],\n        gameTypeId: '',\n        initSortData: [],\n        currentSortData: [],\n        currentTopNumber: 0,\n        currentGameTypeId: 1,\n        currentDeviceType: 'android',\n        autoCompleteList: [],\n        gameOptions: [],\n        chosenGameName: '',\n        chosenGameInfo: {},\n      }\n    },\n    computed: {\n      layoutHeight() {\n        return this.$store.state.app.layoutHeight - 40;\n      }\n    },\n    watch: {\n      'formData.bigImageUrl': function (value) {\n        console.warn(value)\n      },\n      chosenGameName(value) {\n        this.queryModel.name = value\n      },\n      initSortData(value) {\n        console.log(value)\n      }\n    },\n    mounted() {\n      this.getGameTypeInfo();\n    },\n    methods: {\n      getGameTypeInfo() {\n        // alert(this.currentGameTypeId)\n        this.loading = true;\n        this.queryModel = Object.assign(this.queryModel, this.pagination);\n        this.$http.get(this.$baseUrl + this.game_typeListRequest, {\n          params: this.queryModel\n        }).then(response => {\n          console.warn(response)\n\n\n          this.gameTypeInfo = response;\n          this.currentTopNumber = this.gameTypeInfo.list[0].topNumber;\n          this.currentGameTypeId = this.gameTypeInfo.list[0].id;\n\n\n          this.queryModel = Object.assign(this.queryModel, {\n            // page: 1,\n            // limit: this.gameTypeInfo.list[0].topNumber,\n            // name: '',\n            // status: 1,\n            // title: '',\n            // description: '',\n            deviceType: this.currentDeviceType,\n            gameTypeId: this.currentGameTypeId\n\n          });\n          this.getSortList();\n          this.loading = false\n        })\n      },\n      getSortList() {\n        let deviceTypeList = ['android', 'ios'];\n        let result = '';\n        this.loading = true;\n        deviceTypeList.forEach(item1 => {\n          Object.keys(this.queryModel).forEach(item2 => {\n            if (item1 === item2) {\n              if (this.queryModel[item2] === true) {\n                result = item1;\n              }\n            }\n          })\n        });\n        console.log(this.queryModel)\n        console.log(result)\n        this.$http.get(this.$baseUrl + this.rankListRequest, {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          params: {\n            gameTypeId: this.currentGameTypeId,\n            deviceType: this.queryModel.deviceType\n          }\n        }).then(response => {\n          console.log(response)\n          this.initSortData = [];\n          this.currentSortData = [];\n          response.list.forEach((item, index) => {\n            this.$set(this.initSortData, index, item)\n          });\n\n          response.list.forEach((item, index) => {\n            this.$set(this.currentSortData, index, item)\n          });\n          this.loading = false;\n\n        })\n      },\n\n\n      chooseGameType(data) {\n        console.log(data)\n        this.currentGameTypeId = this.gameTypeInfo.list[data.index].id;\n        this.currentTopNumber = this.gameTypeInfo.list[data.index].topNumber;\n\n        this.queryModel = Object.assign(this.queryModel, {\n          page: 1,\n          limit: this.currentTopNumber,\n          name: '',\n          status: 1,\n          title: '',\n          description: '',\n          gameTypeId: this.currentGameTypeId\n        });\n        this.getSortList();\n      },\n      chooseDeviceType(data) {\n        console.log(data)\n        this.currentDeviceType = this.$store.state.app.deviceTypeDictionary[data.index].code;\n        this.queryModel = Object.assign(this.queryModel, {\n          gameTypeId: this.currentGameTypeId,\n          deviceType: this.currentDeviceType\n        });\n        console.log(this.queryModel)\n        this.getSortList();\n      },\n      handleAddGame() {\n        this.dialogFormVisible = true;\n        this.queryModel.name = '';\n        this.chosenGameName = '';\n      },\n      addGame() {\n        if (Object.keys(this.chosenGameInfo).length > 0) {\n          let result = [];\n          result = this.currentSortData;\n          result.push(this.chosenGameInfo)\n          this.currentSortData = result;\n          console.log(this.currentSortData)\n          console.log(this.initSortData)\n          this.dialogFormVisible = false;\n          // this.compareIsSortDataChanged();\n\n\n          // this.$http.post(this.$baseUrl + this.operationGameTypeMappingRequest, [{\n          //   gameId: this.chosenGameInfo.id.toString(),\n          //   gameTypeId: this.currentGameTypeId.toString(),\n          //   operation: true\n          // }], {\n          //   headers: {\n          //     'Content-Type': 'application/json',\n          //   },\n          // }).then(response => {\n          //   console.log(response)\n          //   this.queryModel.name = '';\n          //   this.queryModel.gameTypeId = this.currentGameTypeId;\n          //   this.getSortList();\n          //   this.dialogFormVisible = false;\n          // }).catch(error => {\n          //   console.log(error)\n          // })\n        } else {\n          this.$message.warning('无游戏可添加')\n        }\n\n\n      },\n      minusGame(index) {\n        let result = this.currentSortData;\n        result.splice(index, 1);\n        this.currentSortData = result;\n        console.log(this.currentSortData)\n        // this.$confirm('确认删除?', '提示', {\n        //   confirmButtonText: '确定',\n        //   cancelButtonText: '取消',\n        //   type: 'warning'\n        // }).then(() => {\n        //   this.$http.post(this.$baseUrl + this.operationGameTypeMappingRequest, [{\n        //     gameId: this.currentSortData[index].id.toString(),\n        //     gameTypeId: this.currentGameTypeId.toString(),\n        //     operation: false\n        //   }], {\n        //     headers: {\n        //       'Content-Type': 'application/json',\n        //     },\n        //   }).then(response => {\n        //     console.log(response)\n        //     this.queryModel.gameTypeId = this.currentGameTypeId;\n        //     this.getSortList();\n        //   })\n        // })\n      },\n\n      saveSort() {\n        let requestBody = {};\n        if (this.currentSortData.length === 0) {\n          this.$message.warning('排序列表不能为空')\n          return;\n        }\n        if (this.currentDeviceType === 'ios') {\n          requestBody = {\n            iosGameIdList: this.currentSortData.map(item => item.id)\n          };\n        } else if (this.currentDeviceType === 'android') {\n          requestBody = {\n            androidGameIdList: this.currentSortData.map(item => item.id)\n          }\n        }\n        this.$http.post(this.$baseUrl + this.rankGameByTypeRequest + `/${this.currentGameTypeId}`, requestBody).then(response => {\n          console.log(response);\n          this.getSortList();\n        }).catch(error => {\n          this.$message.error(`${error.response.status.toString()}  ${error.response.data.error}`)\n        })\n      },\n      focusSortList(queryString, callback) {\n        console.log(this.gameOptions)\n        this.loading = true;\n\n        this.queryModel = Object.assign(this.queryModel, {\n          limit: 999,\n          page: 1,\n          status: 1,\n          title: '',\n          description: '',\n          gameTypeId: '',\n        });\n        console.log(this.queryModel)\n\n\n        this.$http.get(this.$baseUrl + this.game_infoListRequest, {\n          params: this.queryModel\n        }).then(response => {\n          console.log(response)\n          this.loading = false;\n          this.total = response.total;\n          let result = [];\n          if (response.list.length !== 0) {\n            response.list.forEach((item, index) => {\n              result.push(Object.assign(item, {\n                value: item.name\n              }));\n            });\n            this.currentSortData.forEach(item1 => {\n              result = result.filter(item2 => item1.name !== item2.name)\n            });\n\n            console.log(111, result)\n\n            callback(result)\n\n            console.log(222, this.gameOptions)\n          }\n\n\n        })\n      },\n\n      chooseGame(data) {\n        console.log(333, data)\n        this.chosenGameInfo = data;\n        this.queryModel.name = data.value;\n\n      },\n      compareIsSortDataChanged() {\n        let result = false;\n        if (this.initSortData.length !== this.currentSortData.length) {\n          result = true;\n        } else {\n          this.initSortData.forEach((item, index) => {\n            if (this.currentSortData[index].id !== item.id) {\n              result = true;\n            }\n          })\n        }\n        return result;\n      }\n\n    }\n  }\n</script>\n<style lang='scss'>\n  @import \"../../styles/game.scss\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/game/gameSort.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('CommonLoading',{attrs:{\"loading\":_vm.loading,\"relative\":false}}),_vm._v(\" \"),_c('el-tabs',{attrs:{\"tab-position\":\"left\"},on:{\"tab-click\":_vm.chooseDeviceType}},_vm._l((_vm.$store.state.app.deviceTypeDictionary),function(item){return _c('el-tab-pane',{key:item.code,style:({height:_vm.layoutHeight-5+'px'}),attrs:{\"label\":item.name}},[_c('el-tabs',{attrs:{\"tab-position\":\"left\"},on:{\"tab-click\":_vm.chooseGameType}},_vm._l((_vm.gameTypeInfo.list),function(item,index){return _c('el-tab-pane',{key:item.id,attrs:{\"label\":item.name+\"(槽位容量\" + (item.topNumber) + \")\"}},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":24}},[_c('div',{staticClass:\"common_sortlist_wrapper game_sortlist_container\"},[_c('ul',{staticClass:\"sortlist\"},[_c('Draggable',{attrs:{\"options\":{}},on:{\"start\":function($event){_vm.drag=true},\"end\":function($event){_vm.drag=false}},model:{value:(_vm.currentSortData),callback:function ($$v) {_vm.currentSortData=$$v},expression:\"currentSortData\"}},_vm._l((_vm.currentSortData),function(item,index){return _c('li',{key:item.id},[_c('label',{staticClass:\"gamename\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('a',{staticClass:\"minus\",on:{\"click\":function($event){_vm.minusGame(index)}}},[_c('span',{staticClass:\"add el-icon-remove-outline\"})])])}))],1),_vm._v(\" \"),(_vm.currentSortData.length<_vm.currentTopNumber)?_c('ul',{staticClass:\"add\"},[_c('li',[_c('a',{staticClass:\"plus\",on:{\"click\":_vm.handleAddGame}},[_c('span',{staticClass:\"add el-icon-circle-plus-outline\"})])])]):_vm._e()])])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"footer\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.compareIsSortDataChanged()},on:{\"click\":_vm.saveSort}},[_vm._v(\"保存排序\")])],1)],1)],1)}))],1)})),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.textMap[_vm.dialogStatus],\"visible\":_vm.dialogFormVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-form',{ref:\"queryModel\",attrs:{\"rules\":_vm.rules,\"model\":_vm.queryModel,\"label-position\":\"right\",\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"游戏名称\",\"prop\":\"name\"}},[_c('el-autocomplete',{attrs:{\"fetch-suggestions\":_vm.focusSortList,\"placeholder\":\"请输入内容\"},on:{\"select\":_vm.chooseGame},model:{value:(_vm.chosenGameName),callback:function ($$v) {_vm.chosenGameName=$$v},expression:\"chosenGameName\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(_vm._s(_vm.$t('table.cancel')))]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addGame}},[_vm._v(_vm._s(_vm.$t('table.confirm')))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-494531fc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/game/gameSort.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-494531fc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./gameSort.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./gameSort.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./gameSort.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-494531fc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./gameSort.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/game/gameSort.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-494531fc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=styles&index=0!./gameSort.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"337aaee2\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-494531fc\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=styles&index=0!./src/views/game/gameSort.vue\n// module id = K+9L\n// module chunks = 9"],"sourceRoot":""}